<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teks - RZF Academy</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f0f9ff;
    }

    .navbar-custom {
      background: linear-gradient(to right, #007BFF, #00BFFF);
    }

    .card-text-preview {
      white-space: pre-line;
      max-height: 150px;
      overflow: hidden;
    }

    footer {
      background: #f8f9fa;
      padding: 10px;
    }
  </style>
</head>

<body class="d-flex flex-column min-vh-100">

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-custom navbar-dark px-3">
    <a class="navbar-brand fw-bold" href="dashboard.html">RZF Academy</a>
    <div class="ms-auto d-flex align-items-center">
      <a href="upload.html" class="btn btn-light btn-sm me-2">Upload</a>
      <a href="my.html" class="btn btn-outline-light btn-sm">Konten Saya</a>
    </div>
  </nav>

  <!-- FILTER -->
  <div class="container my-4">
    <div class="row justify-content-between align-items-center mb-3">
      <div class="col-md-6">
        <h4 class="text-primary">Konten Teks</h4>
      </div>
      <div class="col-md-6 text-end">
        <select id="filterKategori" class="form-select w-auto d-inline" onchange="tampilTeks()">
          <option value="">Semua Kategori</option>
        </select>
      </div>
    </div>

    <!-- TAMPILAN TEKS -->
    <div class="row" id="teksContainer">
      <!-- Diisi oleh JS -->
    </div>
  </div>

  <!-- FOOTER -->
<footer class="mt-auto text-center text-muted py-3" style="background:#f8f9fa;">
        &copy; 2025 <a href="https://portfolio-chx.netlify.app/" class="text-decoration-none fw-semibold text-dark">CHX</a> â€¢ All rights
        reserved.
    </footer>

  <script>
    function isiDropdownKategori() {
      const select = document.getElementById("filterKategori");
      const list = JSON.parse(localStorage.getItem("kategoriList") || "[]");

      select.innerHTML = `<option value="">Semua Kategori</option>`;
      list.forEach(kat => {
        const opt = document.createElement("option");
        opt.value = kat;
        opt.textContent = kat.charAt(0).toUpperCase() + kat.slice(1);
        select.appendChild(opt);
      });
    }

    function tampilTeks() {
      const konten = JSON.parse(localStorage.getItem("konten") || "[]");
      const filter = document.getElementById("filterKategori").value;
      const container = document.getElementById("teksContainer");

      const teksKonten = konten.filter(item => item.jenis === "teks" && (!filter || item.kategori === filter));
      container.innerHTML = "";

      if (teksKonten.length === 0) {
        container.innerHTML = "<p class='text-muted'>Tidak ada konten ditemukan.</p>";
        return;
      }

      teksKonten.reverse().forEach(item => {
        const card = document.createElement("div");
        card.className = "col-md-6 mb-4";
        card.innerHTML = `
          <div class="card shadow-sm h-100">
            <div class="card-body">
              <h5 class="card-title">${item.judul}</h5>
              <p class="card-text card-text-preview">${item.teks}</p>
              <p class="text-muted mb-1"><small>Oleh: ${item.userName}</small></p>
              <span class="badge bg-info text-dark">${item.kategori}</span>
            </div>
          </div>
        `;
        container.appendChild(card);
      });
    }

    window.onload = function () {
      isiDropdownKategori();
      tampilTeks();
    };
  </script>

</body>

</html>
