<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RZF Academy - Beranda</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-sky-50 min-h-screen flex flex-col">

    <!-- NAVBAR -->
    <nav class="bg-gradient-to-r from-blue-600 to-sky-400 text-white px-4 py-3 flex justify-between items-center">
        <h1 class="text-xl font-bold">RZF Academy</h1>
        <div class="space-x-2">
            <a href="login.html"
                class="px-4 py-1 border border-white rounded hover:bg-white hover:text-blue-600">Login</a>
            <a href="registrasi.html" class="px-4 py-1 bg-white text-blue-600 rounded hover:bg-blue-100">Register</a>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="flex-1 container mx-auto px-4 py-6">
        <div class="text-center mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-blue-600">Selamat Datang di RZF Academy</h2>
            <p class="text-gray-600 mt-2">Tempat berbagi karya dalam bentuk galeri dan tulisan</p>
        </div>

        <!-- Search -->
        <div class="text-center mb-6">
            <input id="searchInput" type="text" placeholder="Cari konten berdasarkan judul..." oninput="cariKonten()"
                class="w-11/12 md:w-1/2 px-4 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-400">
        </div>

        <!-- Badge Kategori -->
        <div class="text-center space-x-2 mb-6">
            <span class="inline-block bg-sky-300 text-black px-3 py-1 rounded-full text-sm">#sky</span>
            <span class="inline-block bg-cyan-300 text-black px-3 py-1 rounded-full text-sm">#natural</span>
            <span class="inline-block bg-red-500 text-white px-3 py-1 rounded-full text-sm">#populer</span>
        </div>

        <!-- Konten -->
        <div id="hasilContainer" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- JS akan isi di sini -->
        </div>
    </main>

    <!-- Overlay Preview Gambar -->
    <div id="previewOverlay" class="fixed inset-0 bg-black bg-opacity-80 hidden justify-center items-center z-50">
        <span id="closePreview"
            class="absolute top-5 right-6 text-white text-3xl cursor-pointer font-bold">&times;</span>
        <img id="previewImage" class="max-w-[90%] max-h-[90%] rounded shadow-2xl" />
    </div>

    <!-- Modal Baca Selengkapnya -->
    <!-- Modal Baca Selengkapnya -->
    <div id="bacaModal" class="fixed inset-0 bg-black bg-opacity-70 hidden justify-center items-center z-50">
        <div class="bg-white max-w-xl w-full mx-4 p-6 rounded-xl shadow-lg relative">
            <button onclick="tutupBaca()"
                class="absolute top-2 right-2 text-gray-600 hover:text-red-500 text-xl font-bold">✖</button>
            <h2 id="judulBaca" class="text-xl font-bold mb-2 text-blue-700"></h2>
            <p id="isiBaca"
                class="text-gray-800 whitespace-pre-line leading-relaxed text-sm max-h-[60vh] overflow-y-auto"></p>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="bg-gray-100 text-center text-gray-600 py-4 text-sm">
        &copy; 2025 <a href="https://portfolio-chx.netlify.app/"
            class="font-semibold text-black hover:underline">CHX</a> • All rights reserved.
    </footer>

    <!-- JS -->
    <script>
        // Ganti fungsi cariKonten() di index.html
        function cariKonten() {
            const keyword = document.getElementById("searchInput").value.toLowerCase();
            const konten = JSON.parse(localStorage.getItem("konten") || "[]");
            const hasil = keyword ? konten.filter(k => k.judul.toLowerCase().includes(keyword)) : konten;
            const container = document.getElementById("hasilContainer");
            container.innerHTML = "";

            if (hasil.length === 0) {
                container.innerHTML = "<p class='text-gray-500 col-span-full text-center'>Tidak ada konten ditemukan.</p>";
                return;
            }

            hasil.reverse().forEach(item => {
                const card = document.createElement("div");
                card.className = "bg-white rounded-lg shadow hover:shadow-md transition flex flex-col md:flex-row items-start gap-4 p-4";

                const kalimat = item.teks ? item.teks.match(/[^.!?]+[.!?]+/g) || [] : [];
                const preview = kalimat.slice(0, 1).join(' ');
                const placeholderImg = 'https://placehold.co/24x24/e2e8f0/718096?text=U';

                card.innerHTML = `
            ${item.jenis === 'gambar' ? `<img src="${item.gambar}" onclick="tampilkanPreview('${item.gambar}')" class="w-32 h-32 object-contain cursor-pointer border rounded bg-gray-50" />` : ""}
            <div class="flex-1">
                <h3 class="font-semibold text-lg text-blue-700">${item.judul}</h3>
                ${item.jenis === 'teks' ? `<p class="text-sm text-gray-600 mt-1">${kalimat.length > 5 ? preview + '...' : item.teks}</p>${kalimat.length > 5 ? `<button onclick="bukaBaca('${encodeURIComponent(item.teks)}', '${encodeURIComponent(item.judul)}')" class="mt-2 text-blue-500 hover:underline text-sm font-semibold">Baca Selengkapnya</button>` : ''}` : ''}
                
                <div class="mt-3 pt-2 border-t flex flex-wrap items-center gap-x-4 gap-y-2">
                    <span class="bg-blue-200 text-blue-800 text-xs px-2 py-1 rounded">${item.kategori}</span>
                    <div class="flex items-center gap-2">
                        <img src="${item.userProfilePicture || placeholderImg}" alt="Author" class="w-6 h-6 rounded-full object-cover">
                        <span class="text-gray-500 text-xs">Oleh: ${item.userName}</span>
                    </div>
                </div>
            </div>
        `;
                container.appendChild(card);
            });
        }

        function tampilkanPreview(src) {
            document.getElementById("previewImage").src = src;
            document.getElementById("previewOverlay").style.display = "flex";
        }

        function tutupPreview() {
            document.getElementById("previewOverlay").style.display = "none";
        }

        function bukaBaca(teksEncoded, judulEncoded) {
            const teks = decodeURIComponent(teksEncoded);
            const judul = decodeURIComponent(judulEncoded);

            document.getElementById("judulBaca").textContent = judul;
            document.getElementById("isiBaca").textContent = teks;
            document.getElementById("bacaModal").style.display = "flex";
        }

        function tutupBaca() {
            document.getElementById("bacaModal").style.display = "none";
        }

        window.onload = cariKonten;
        document.getElementById("previewOverlay").addEventListener("click", tutupPreview);
    </script>


</body>

</html>